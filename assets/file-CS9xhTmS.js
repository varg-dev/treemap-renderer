import{t as J,v as Q,b as Z,c as ee}from"./index-B4YpSIjP.js";import{w as x,T as L,N as te,C as P,E as se,g as re,i as ne,V as ie}from"./example-9-uevPh_.js";import"./papaparse.min-lL-0_K96.js";x.auxiliaries.log;x.auxiliaries.LogLevel;class ae{constructor(){this._isInValues=!1,this._isInRow=!1,this._resultChunk="",this.transform=(e,t)=>{const r='"values": [',n=e.split(`
`);let i=0;if(!this._isInValues)if(e.includes(r))this._isInValues=!0,i=n.findIndex(u=>u.trim()===r)+1;else return;for(const u of n.slice(i)){const o=u.trim();switch(o){case"[":this._isInRow=!0;break;case"],":case"]":if(!this._isInRow){t.enqueue(this._resultChunk),t.terminate();return}this._resultChunk+=`
`,this._isInRow=!1;break;default:this._resultChunk+=o.replace(/"/g,"");break}}t.enqueue(this._resultChunk),this._resultChunk=""}}start(){}flush(){}}function oe(s){let t="";for(;s>0;){const r=(s-1)%26;t=String.fromCharCode(65+r)+t,s=Math.trunc((s-r)/26)}return t}function O(s){return fetch(`https://sheets.googleapis.com/v4/spreadsheets${s}`)}async function ue(s,e){const t=`/${s}?key=${e}`,r=await O(t),{sheets:n}=await r.json(),{title:i,gridProperties:{rowCount:u,columnCount:o}}=n[0].properties;return`${i}!A1:${oe(o)}${u}`}async function he(s,e,t){const r=`/${s}/values/${t}?key=${e}`;return(await O(r)).body.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream(new ae)).pipeThrough(new TextEncoderStream)}var ce=Object.freeze(Object.defineProperty({__proto__:null,fetchSheetDataRange:ue,fetchSheetValues:he},Symbol.toStringTag,{value:"Module"}));class le{constructor(){this._isInValues=!1,this._isInRow=!1,this._resultChunk="",this.transform=(e,t)=>{const r='"text":[';let n=0;if(!this._isInValues){const i=e.indexOf(r);if(i>=0)this._isInValues=!0,n=i+r.length;else return}for(const i of e.substring(n))switch(i){case"[":this._isInRow=!0;break;case"]":if(!this._isInRow){t.enqueue(this._resultChunk),t.terminate();return}this._resultChunk+=`
`,this._isInRow=!1;break;case'"':break;case",":if(!this._isInRow)break;default:this._resultChunk+=i;break}t.enqueue(this._resultChunk),this._resultChunk=""}}start(){}flush(){}}function $(s,e){const t=new Headers;return t.set("Authorization",`Bearer ${e}`),fetch(`https://graph.microsoft.com/v1.0/me/drive/items${s}`,{headers:t})}async function de(s,e){const t=`/${s}/workbook/worksheets`,r=await $(t,e),{value:n}=await r.json(),{name:i}=n[0];return i}async function me(s,e,t){const r=`/${s}/workbook/worksheets('${t}')/usedRange?$select=text`;return(await $(r,e)).body.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream(new le)).pipeThrough(new TextEncoderStream)}var pe=Object.freeze(Object.defineProperty({__proto__:null,fetchSheetDataRange:de,fetchSheetValues:me},Symbol.toStringTag,{value:"Module"}));function fe(s){const e=new URL(s);let t,r;switch(e.host){case"docs.google.com":t="google",[,,,r]=e.pathname.split("/");break;case"onedrive.live.com":t="excel",r=e.searchParams.get("resid");break;default:throw new Error("Invalid url for spreadsheet service")}return{type:t,sheetId:r}}var a=(s=>(s.Number="number",s.Int8="int8",s.Uint8="uint8",s.Int16="int16",s.Uint16="uint16",s.Int32="int32",s.Uint32="uint32",s.Float32="float32",s.Float64="float64",s.Color="color",s.String="string",s.Date="date",s))(a||{});function v(s){switch(s){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":case"number":return 4;case"float64":case"date":return 8;case"color":return 16;case"string":default:return 0}}const _e=1,we=new RegExp(/^(#|0x)?(([0-9a-f]{3}){1,2}|([0-9a-f]{4}){1,2})$/i);function ge(s,e=!1){const t=[0,0,0,_e];if(!we.test(s))return e||console.warn("hexadecimal RGBA color string must conform to either","#0000, or #00000000, given",s),t;const r=s.startsWith("0x")?2:s.startsWith("#")?1:0,n=Math.floor((s.length-r)/3),i=n-1;return t[0]=parseInt(s[r+0*n]+s[r+0*n+i],16)/255,t[1]=parseInt(s[r+1*n]+s[r+1*n+i],16)/255,t[2]=parseInt(s[r+2*n]+s[r+2*n+i],16)/255,(s.length-r===4||s.length-r===8)&&(t[3]=parseInt(s[r+3*n]+s[r+3*n+i],16)/255),!e&&(isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3]))&&console.warn(`expected well formatted hexadecimal RGBA string, given '${s}'`),t}function ve(s){if(s.startsWith("#")){const e=ge(s,!0);if(e[0]!==0||e[1]!==0||e[2]!==0||e[3]!==0)return a.Color}return Number.isNaN(Number(s))?isNaN(Date.parse(s))?a.String:a.Date:a.Number}function be(s,e){if(s===void 0)return e;if(e===void 0)return s;const t=new Set([s,e]);return t.size===1?t.values().next().value:t.has(a.Date)&&t.has(a.Number)?a.Date:a.String}function Ie(s,e,t=""){let r=0,n;for(;(n=s.indexOf(`
`,r))!==-1;){const i=s.charAt(n-1)==="\r",u=s.substring(r,n-(i?1:0));r===0?e.push(t+u):e.push(u),r=n+1}return s.substring(r)}function ke(s,e,t){return ye(s[e.chunk],e,t)}function ye(s,e,t){const r=new TextDecoder,n=new Array,i=new Uint8Array(s,e.char,t.char-e.char),u=Ie(r.decode(i),n);return n.push(u),n}class Ce{constructor(){this._samples=new Map}start(e,t=e.toString()){if(this._samples.has(e)){console.warn("performance measurement already exists");return}this._samples.set(e,{start:Date.now(),end:0,delta:0,label:t})}stop(e){if(!this._samples.has(e)){console.warn("performance measurement doesn't exist");return}const t=this._samples.get(e);t.end=Date.now(),t.delta=t.end-t.start}get samples(){return[...this._samples.values()]}}function Se(s,e){const t=new Array;let r=0,n=!1,i=!1;const u=o=>{t.push(s.substring(n?r+1:r,n?o-1:o))};for(let o=0;o<s.length;o++){if(s.charAt(o)==='"'){i=!i,n=!0;continue}if(i)continue;const{end:l,skip:_}=xe(s,o,e);l&&(u(o),r=o+_,n=!1)}return u(void 0),t}function xe(s,e,t){switch(s.charAt(e)){case t:case`
`:return{end:!0,skip:1};case"\r":if(s.charAt(e+1)===`
`)return{end:!0,skip:2};default:return{end:!1,skip:0}}}function U(s,e){return e?new SharedArrayBuffer(s):new ArrayBuffer(s)}class H{constructor(e,t,r){this._type=e,this._length=t,this._offset=r}get type(){return this._type}get length(){return this._length}get offset(){return this._offset}set offset(e){this._offset=e}}class R extends H{get data(){return this._data}}class Ne extends R{constructor(e,t,r){super(a.Color,e,t),this._data=U(e*4*4,r),this._view=new Float32Array(this._data)}get view(){return this._view}get(e){return Array.from(this._view.subarray(e*4,(e+1)*4))}set(e,t){this._view.set(t,e*4)}}class Ae extends R{constructor(e,t,r){super(a.Date,e,t),this._data=U(e*v(a.Date),r),this._view=new Float64Array(this._data),this._min=Number.POSITIVE_INFINITY,this._max=Number.NEGATIVE_INFINITY}get view(){return this._view}get rawMin(){return this._min}get rawMax(){return this._max}get min(){return new Date(this._min)}get max(){return new Date(this._max)}updateExtrema(e){e<this._min&&(this._min=e),e>this._max&&(this._max=e)}rawGet(e){return this._view[e]}rawSet(e,t){this._view[e]=t,this.updateExtrema(t)}get(e){return new Date(this._view[e])}set(e,t){const r=t.getTime();this._view[e]=r,this.updateExtrema(r)}}class b extends R{constructor(e,t,r,n){super(a.Number,e,t),this._data=U(e*r,n),this._min=Number.POSITIVE_INFINITY,this._max=Number.NEGATIVE_INFINITY}get view(){return this._view}get min(){return this._min}get max(){return this._max}get(e){return this._view[e]}set(e,t){this._view[e]=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t)}}class Ee extends b{constructor(e,t,r){super(e,t,v(a.Int8),r),this._view=new Int8Array(this._data)}}class Te extends b{constructor(e,t,r){super(e,t,v(a.Uint8),r),this._view=new Uint8Array(this._data)}}class Fe extends b{constructor(e,t,r){super(e,t,v(a.Int16),r),this._view=new Int16Array(this._data)}}class ze extends b{constructor(e,t,r){super(e,t,v(a.Uint16),r),this._view=new Uint16Array(this._data)}}class De extends b{constructor(e,t,r){super(e,t,v(a.Int32),r),this._view=new Int32Array(this._data)}}class Ve extends b{constructor(e,t,r){super(e,t,v(a.Uint32),r),this._view=new Uint32Array(this._data)}}class W extends b{constructor(e,t,r){super(e,t,v(a.Float32),r),this._view=new Float32Array(this._data)}}class Ue extends b{constructor(e,t,r){super(e,t,v(a.Float64),r),this._view=new Float64Array(this._data)}}class q extends H{constructor(e,t,r){super(a.String,e,t),this._data=new Array(e)}get(e){return this._data[e]}set(e,t){this._data[e]=t}}function Re(s,e,t,r){switch(s){case a.Number:case a.Float32:return new W(e,t,r);case a.Int8:return new Ee(e,t,r);case a.Uint8:return new Te(e,t,r);case a.Int16:return new Fe(e,t,r);case a.Uint16:return new ze(e,t,r);case a.Int32:return new De(e,t,r);case a.Uint32:return new Ve(e,t,r);case a.Float64:return new Ue(e,t,r);case a.Color:return new Ne(e,t,r);case a.Date:return new Ae(e,t,r);case a.String:return new q(e,t,r);default:return}}function Me(s,e){const r=Re(s._type,0,0,e);return Object.assign(r,s)}class F{constructor(e,t){this._chunks=[],this._length=0,this._name=e,this._type=t}push(e){this._chunks.push(e),this._length+=e.length,this._altered=!0}reset(){this._chunks=[],this._length=0,this._altered=!0}get name(){return this._name}get type(){return this._type}get length(){return this._length}get(e){const t=this._chunks.find(r=>r.offset<=e&&r.offset+r.length>e);if(!t)throw new Error("Invalid index.");return t.get(e-t.offset)}set(e,t){const r=this._chunks.find(n=>n.offset<=e&&n.offset+n.length>e);if(!r)throw new Error("Invalid index.");r.set(e-r.offset,t)}get chunkCount(){return this._chunks.length}get chunks(){return this._chunks}getChunk(e){return this._chunks[e]}getChunks(e=0,t){return this._chunks.slice(e,t)}get altered(){return this._altered}set altered(e){this._altered=e}}class Le extends F{constructor(e){super(e,a.Color)}}class Be extends F{constructor(e){super(e,a.Date),this._min=Number.POSITIVE_INFINITY,this._max=Number.NEGATIVE_INFINITY}push(e){super.push(e),e.rawMin<this._min&&(this._min=e.rawMin),e.rawMax>this._max&&(this._max=e.rawMax)}reset(){super.reset(),this._min=Number.POSITIVE_INFINITY,this._max=Number.NEGATIVE_INFINITY}get rawMin(){return this._min}get rawMax(){return this._max}get min(){return new Date(this._min)}get max(){return new Date(this._max)}}class I extends F{constructor(e){super(e,a.Number),this._min=Number.POSITIVE_INFINITY,this._max=Number.NEGATIVE_INFINITY}push(e){super.push(e),e.min<this._min&&(this._min=e.min),e.max>this._max&&(this._max=e.max)}reset(){super.reset(),this._min=Number.POSITIVE_INFINITY,this._max=Number.NEGATIVE_INFINITY}get min(){return this._min}get max(){return this._max}}class Pe extends I{}class Oe extends I{}class $e extends I{}class He extends I{}class We extends I{}class qe extends I{}class Y extends I{}class Ye extends I{}class j extends F{constructor(e){super(e,a.String)}}function B(s,e){switch(e){case a.Number:case a.Float32:return new Y(s);case a.Int8:return new Pe(s);case a.Uint8:return new Oe(s);case a.Int16:return new $e(s);case a.Uint16:return new He(s);case a.Int32:return new We(s);case a.Uint32:return new qe(s);case a.Float64:return new Ye(s);case a.Color:return new Le(s);case a.Date:return new Be(s);case a.String:return new j(s);default:return}}var g=(s=>(s[s.Setup=0]="Setup",s[s.AddChunk=1]="AddChunk",s[s.NoMoreChunks=2]="NoMoreChunks",s[s.Processed=3]="Processed",s[s.Finished=4]="Finished",s))(g||{});class G{constructor(){this._perfMon=new Ce}openStream(e){if(!e.value)throw this._options.verbose&&console.log("received no data"),new Error("No data");return this._firstChunk=e.value.buffer,this.detectTypes(e.value)}async readStreamFirstChunk(){const e={chunk:this._firstChunk},t={type:g.AddChunk,data:e};this._worker.postMessage(t,[this._firstChunk]),this._firstChunk=void 0;const r=await this._reader.read();await this.readStream(r)}async readStream(e){if(e.done){this._options.verbose&&console.log("stream ended"),this.sendNoMoreChunks();return}if(!e.value)throw this._options.verbose&&console.log("received no data"),new Error("No data");const t={chunk:e.value.buffer},r={type:g.AddChunk,data:t};this._worker.postMessage(r,[e.value.buffer]);const n=await this._reader.read();await this.readStream(n)}openBuffer(){return this.detectTypes(this._buffer)}readBuffer(){this._worker.postMessage({type:g.AddChunk,data:{chunk:this._buffer}},[this._buffer]),this._worker.postMessage({type:g.NoMoreChunks,data:{}})}sendNoMoreChunks(){const e={},t={type:g.NoMoreChunks,data:e};this._worker.postMessage(t)}detectTypes(e){const t=ke([e],{chunk:0,char:0},{char:e.byteLength});this._firstChunkSplit=t.map(o=>Se(o,this._options.delimiter));const r=+this._options.includesHeader,u=this._firstChunkSplit.slice(r,Math.min(r+this._options.typeInferLines,this._firstChunkSplit.length-1)).map(o=>o.map(h=>ve(h))).reduce((o,h)=>o.map((l,_)=>be(l,h[_]))).map((o,h)=>({name:this._options.includesHeader?this._firstChunkSplit[0][h]:"",type:o}));return this._perfMon.stop(`${this._openedSourceId}-open`),u}setupColumns(){return this._columns=[...this._loadOptions.columns.map(({type:e},t)=>B(this._options.includesHeader?this._firstChunkSplit[0][t]:`Column ${t}`,e)),...(this._loadOptions.generatedColumns??[]).map(({name:e,type:t})=>B(e,t))],this._firstChunkSplit=void 0,this._columns}setupWorker(){return new Promise((e,t)=>{this._worker=new Worker(new URL("/treemap-renderer/assets/main-BefLUNdC.js",import.meta.url),{type:"module"}),this._worker.onmessage=i=>{var o,h;const u=i.data;switch(u.type){case g.Processed:{const l=this.onProcessed(u.data);(h=(o=this._loadOptions).onUpdate)==null||h.call(o,l);break}case g.Finished:{this._worker.terminate(),e(this.onFinished(u.data));break}default:{this._options.verbose&&console.log("received invalid msg from main worker:",u),t(["received invalid msg from main worker:",u]);break}}};const r={columns:this._loadOptions.columns.map(i=>i.type),generatedColumns:this._loadOptions.generatedColumns??[],options:{delimiter:this._options.delimiter,includesHeader:this._options.includesHeader,verbose:this._options.verbose}},n={type:g.Setup,data:r};this._worker.postMessage(n)})}onProcessed(e){return e.chunks.map(r=>Me(r,this._options.sharedArrayBuffer)).forEach((r,n)=>{var i;return(i=this._columns[n])==null?void 0:i.push(r)}),this._columns[0].length}onFinished(e){return this._options.verbose&&console.log("main worker finished"),this._perfMon.stop(`${this._openedSourceId}-load`),e.performance=[...this._perfMon.samples,...e.performance],this._buffer=null,this._stream=null,this._openedSourceId=null,e}fakeSubWorkerReference(){new Worker(new URL("/treemap-renderer/assets/sub-Dod_SwXw.js",import.meta.url),{type:"module"})}async open(e){if(this._options.delimiter===void 0)throw new Error("Delimiter not specified nor deductible from filename.");if(this._openedSourceId=e,this._perfMon.start(`${e}-open`),this._stream){this._reader=this._stream.getReader();const t=await this._reader.read();return this.openStream(t)}else return this.openBuffer()}async load(){var r,n;this._perfMon.start(`${this._openedSourceId}-load`);const e=this.setupColumns();(n=(r=this._loadOptions).onInit)==null||n.call(r,e);const t=this.setupWorker();return this._stream?this.readStreamFirstChunk():this.readBuffer(),{columns:e,statistics:await t}}set stream(e){this._stream=e}set buffer(e){this._buffer=e}set options(e){this._options=e,e.sharedArrayBuffer&&!SharedArrayBuffer&&(console.error("Shared buffer requested, but not available!"),this._options=Object.assign({},e,{sharedArrayBuffer:!1}))}set loadOptions(e){this._loadOptions=e}}G.TargetNumWorkers=25;class je{constructor(e){this._options={dataSources:{},includesHeader:!0,typeInferLines:20,verbose:!1,...e},this._loader=new G}openFile(e){var t,r;return(t=this._options).size??(t.size=e.size),e instanceof File&&((r=this._options).delimiter??(r.delimiter=V(e.name.split(".").pop()))),this._loader.options=this._options,this._loader.stream=e.stream(),this._loader.open(this._openedDataSource)}async openUrl(e){var t,r;(t=this._options).delimiter??(t.delimiter=V(e.split(".").pop()));const n="Content-Length",i=await fetch(e);return i.headers.has(n)&&((r=this._options).size??(r.size=Number.parseInt(i.headers.get(n)))),this._loader.options=this._options,this._loader.stream=i.body,this._loader.open(this._openedDataSource)}openStream(e){return this._loader.options=this._options,this._loader.stream=e,this._loader.open(this._openedDataSource)}openBuffer(e){return this._loader.options=this._options,this._loader.buffer=e,this._loader.open(this._openedDataSource)}async openSheet(e){var t;const{apiKey:r,sheetUrl:n}=e,{sheetId:i,type:u}=fe(n),o=u==="google"?ce:pe,h=await o.fetchSheetDataRange(i,r),l=await o.fetchSheetValues(i,r,h);return(t=this._options).delimiter??(t.delimiter=V("csv")),this._loader.options=this._options,this._loader.stream=l,this._loader.open(this._openedDataSource)}openInputData(e){if(e instanceof Blob)return this.openFile(e);if(typeof e=="string")return this.openUrl(e);if(e instanceof ReadableStream)return this.openStream(e);if(e instanceof ArrayBuffer||e instanceof SharedArrayBuffer||e instanceof Uint8Array)return this.openBuffer(e);if("sheetUrl"in e&&"apiKey"in e)return this.openSheet(e)}async open(e){const t=this._options.dataSources[e],r=await(typeof t=="function"?t():t);return this._openedDataSource=e,this.openInputData(r)}load(e){return this._loader.loadOptions=e,this._loader.load()}addDataSource(e,t){this._options.dataSources[e]=t}removeDataSource(e){delete this._options.dataSources[e]}}function V(s){switch(s==null?void 0:s.toLowerCase()){case"csv":return",";case"tsv":return"	";default:return}}const K=x.auxiliaries.log,X=x.auxiliaries.LogLevel;class Ge{}class Ke{constructor(e,t){this._headerParsed=!1,this._intermediateChunk="",this.transform=async(r,n)=>{if(this._headerParsed){n.enqueue(r);return}this._intermediateChunk+=r;let i=-1,u=this._intermediateChunk.indexOf(`
`,i+1);for(;u!=-1&&this._intermediateChunk[i+1]=="#";){const o=this._intermediateChunk.substring(i+2,u).trim(),[h,l]=o.split("=").map(_=>_.trim());h=="delimiter"?(this._header.csv_delimiter=l||";",this._loader._options.delimiter=this._header.csv_delimiter):h=="paths"?this._header.path_column=l||"name":h=="weights"?this._header.weight_column=l||"":h=="heights"?this._header.height_column=l||"":h=="colors"?this._header.color_column=l||"":h=="labels"?this._header.label_column=l||"":h=="heightScale"?this._header.height_scale=Number.parseFloat(l||"0.1")||.1:K(X.Warning,"Unparsed header",h,"=",l),i=u,u=this._intermediateChunk.indexOf(`
`,i+1)}i>0&&(this._intermediateChunk=this._intermediateChunk.substring(i+1)),this._intermediateChunk.startsWith("#")||(n.enqueue(this._intermediateChunk),this._intermediateChunk="",this._headerParsed=!0)},this._header=e,this._loader=t}start(){}flush(){}}class T{static initializeHeader(e){e.csv_delimiter=";",e.path_column="name"}static parseResult(e,t,r){const n=(c,m)=>{let C=c.findIndex(p=>p.name==m);if(C<0){const p=new j(m);return p.push(new q(c[0].length,0,!1)),p}return c[C]},i=(c,m)=>{let C=c.findIndex(p=>p.name==m);if(C<0){const p=new Y(m);return p.push(new W(c[0].length,0,!1)),p.getChunk(0).view.fill(-1),p}return c[C]},u=c=>e.findIndex(m=>m.name==c&&m.type=="string")>=0,o=n(e,t.path_column).chunks.map(c=>c._data).flat();for(let c=0;c<o.length;++c)o[c]=o[c].replace("./","");const h=o.map(c=>c.split("/")),l=i(e,t.weight_column),_=i(e,t.height_column),k=i(e,t.color_column);u(t.label_column)?n(e,t.label_column):h.map(c=>c.at(-1));const d=(c,m)=>({parentIndex:m,index:c}),w=(c,m)=>"/"+c.slice(0,m).join("/"),f=new Array,M=new Map,N=new Array,A=new Array,E=new Array,y={};let S=-1;y["/"]=d(S,-1),S+=1,N.push(0),A.push(0),E.push(0),h.forEach((c,m)=>{c.forEach((C,p)=>{const z=w(c,p),D=w(c,p+1);if(!(z in y)){K(X.Warning,z,"not in",y);return}D in y||(y[D]=d(S,y[z].index),f.push(y[D].parentIndex),f.push(S),M.set(S,C),S+=1,p==c.length-1?(N.push(l.get(m)||0),A.push(_.get(m)||0),E.push(k.get(m)||0)):(N.push(0),A.push(0),E.push(0)))})}),r.topology={edges:f,semantics:L.InputSemantics.ParentIdId,format:L.InputFormat.Interleaved},r.buffers=[{identifier:"source-weights",type:"numbers",data:N,linearization:"topology"},{identifier:"source-heights",type:"numbers",data:A,linearization:"topology"},{identifier:"source-colors",type:"numbers",data:E,linearization:"topology"}],r.bufferViews=[{identifier:"weights",source:"buffer:source-weights",transformations:[{type:"fill-invalid",value:1,invalidValue:-1},{type:"propagate-up",operation:"sum"}]},{identifier:"heights-normalized",source:"buffer:source-heights",transformations:[{type:"fill-invalid",value:0,invalidValue:-1},{type:"normalize",operation:"zero-to-max"}]},{identifier:"colors-normalized",source:"buffer:source-colors",transformations:[{type:"fill-invalid",value:0,invalidValue:-1},{type:"normalize",operation:"zero-to-max"}]}],r.colors=[{identifier:"emphasis",colorspace:"hex",value:"#00b0ff"},{identifier:"auxiliary",colorspace:"hex",values:["#00aa5e","#71237c"]},{identifier:"inner",colorspace:"hex",values:["#e8eaee","#eef0f4"]},{identifier:"leaf",preset:"Greens",steps:7}],r.layout={algorithm:"snake",weight:"bufferView:weights",sort:{key:"bufferView:weights",algorithm:te.Algorithm.Keep},parentPadding:{type:"relative",value:.05},siblingMargin:{type:"relative",value:.05},accessoryPadding:{type:"absolute",direction:"bottom",value:[0,.02,.01,0],relativeAreaThreshold:.4,targetAspectRatio:8}},r.geometry={parentLayer:{showRoot:!1},leafLayer:{colorMap:"color:leaf",height:"bufferView:heights-normalized",colors:"bufferView:colors-normalized"},emphasis:{outline:new Array,highlight:new Array},heightScale:t.height_scale},r.labels={innerNodeLayerRange:[1,2],numTopInnerNodes:50,numTopWeightNodes:50,numTopHeightNodes:50,numTopColorNodes:50,names:M},r.altered.alter("any")}static loadAsync(e){const t=new Ge,r=new je({delimiter:";"});T.initializeHeader(t);const n=e.stream().pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream(new Ke(t,r))).pipeThrough(new TextEncoderStream);return r.addDataSource("file",n),new Promise(async(i,u)=>{const o=new P,h=Date.now();console.log("Start parsing:",h);const l=await r.open("file"),{columns:_,statistics:k}=await r.load({columns:l}),d=Date.now();console.log("End CSV parsing:",d,d-h),T.parseResult(_,t,o);const w=Date.now();console.log("End Config parsing:",w,w-d),console.log("Full runtime:",w-h),i(o)})}}class Xe extends se{get canvas(){return this._canvas}get visualization(){return this._visualization}get renderer(){return this._renderer}validate(e){return this.initialize(e)}preview(e){return this.initialize(e)}feature(e){const t=this.initialize(e),r=this._visualization.renderer,n=this._canvas,i=this._visualization,u=n.element;window.document.getElementById("fullscreen").onclick=()=>{x.viewer.Fullscreen.toggle(u)};const o=k=>{const d=i.configuration;try{i.configuration=k,i.update(),r.invalidate()}catch(w){if(console.log(w),d===void 0)return;const f=new P;f.topology=d.topology,f.layout=d.layout,f.buffers=d.buffers,f.bufferViews=d.bufferViews,f.colors=d.colors,f.geometry=d.geometry,f.labels=d.labels,i.configuration=f,i.update(),r.invalidate()}},h=document.getElementById("fileUpload"),l=document.getElementById("loadFile"),_=async()=>{const k=h.files;if(k===null)return;const d=k[0];d!==void 0&&T.loadAsync(d).then(w=>o(w))};return l.onclick=async()=>_(),window.gloperate=re,window.canvas=n,window.context=n.context,window.controller=n.controller,window.visualization=i,window.renderer=r,t}initialize(e){this._canvas=ne(e),this._visualization=new ie;const t=this._visualization.renderer;return this._canvas.renderer=t,super.expose(),!0}uninitialize(){this._canvas.dispose(),this._renderer.uninitialize()}}window.onload=function(){const s=document.getElementById("canvas"),e=new Xe;window.example=e,e.feature(s);const t=window.document.getElementById("context-about");t&&(t.innerText=context.aboutString())};window.treemaprenderer=J;document.title="treemap-renderer";document.querySelector("#version").innerHTML=Q();document.querySelector("#branch").innerHTML=Z();document.querySelector("#commit").innerHTML=ee();document.querySelector("#cryear").innerHTML=new Date().getFullYear();
