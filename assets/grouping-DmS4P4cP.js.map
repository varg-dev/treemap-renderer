{"version":3,"file":"grouping-DmS4P4cP.js","sources":["../../examples/csv-with-grouping/csvdata.ts","../../examples/csv-with-grouping/treemap.ts","../../examples/csv-with-grouping/index.html?html-proxy&index=1.js","../../examples/csv-with-grouping/index.html?html-proxy&index=2.js"],"sourcesContent":["\n/* spellchecker: disable */\n\nimport * as gloperate from 'webgl-operate';\n\nimport log = gloperate.auxiliaries.log;\nimport LogLevel = gloperate.auxiliaries.LogLevel;\n\nimport { parse } from 'papaparse';\n\nimport { Configuration, Topology, NodeSort } from '../../source/treemap-renderer';\n\n/* spellchecker: enable */\n\n\nclass CSVHeader {\n    public csv_delimiter: string;\n    public groupings: string[];\n    public weight_column: string;\n    public height_column: string;\n    public color_column: string;\n    public label_column: string;\n}\n\nclass Edge {\n    public parentIndex: number;\n    public index: number;\n};\n\n\nexport class CSVData {\n    protected static readonly FAILED = (url: string, request: XMLHttpRequest) =>\n        `fetching '${url}' failed (${request.status}): ${request.statusText}`;\n\n    protected static initializeHeader(header: CSVHeader): void {\n        header.csv_delimiter = ';';\n        header.groupings = [];\n    }\n\n    protected static parseHeader(lines: Array<string>, header: CSVHeader): void {\n        while (lines.length >= 1 && lines[0].startsWith('#')) {\n            const line = lines.shift()!.substring(1).trim();\n\n            const [key, value] = line.split('=').map((s: string) => s.trim());\n\n            if (key == 'delimiter') {\n                header.csv_delimiter = value || ';';\n            } else if (key == 'groupings') {\n                header.groupings = (value || '').split('/');\n            } else if (key == 'weights') {\n                header.weight_column = value || '';\n            } else if (key == 'heights') {\n                header.height_column = value || '';\n            } else if (key == 'colors') {\n                header.color_column = value || '';\n            } else if (key == 'labels') {\n                header.label_column = value || '';\n            } else {\n                log(LogLevel.Warning, `Unparsed header`, key, '=', value);\n            }\n        }\n    }\n\n    protected static parsePapaparseResult(result: any, header: CSVHeader, config: Configuration): void {\n        const collect_column = (result: any, name: string) => {\n            if (result.meta.fields.indexOf(name) < 0) {\n                const column = new Array(result.data.length);\n                return column;\n            }\n\n            const column = result.data.map((row: any) => {\n                return row[name] ? parseFloat(row[name]) : -1.0;\n            });\n\n            return column;\n        };\n\n        const has_labels_column = (name: string) => result.meta.fields.indexOf(name) >= 0;\n\n        const collect_labels_column = (result: any, name: string) => {\n            if (result.meta.fields.indexOf(name) < 0) {\n                const column = new Array<string>(result.data.length);\n                return column;\n            }\n\n            const column = result.data.map((row: any) => {\n                return row[name] ? row[name] : \"\";\n            });\n\n            return column;\n        };\n\n        // parse weights\n\n        const weights = collect_column(result, header.weight_column);\n\n        // parse heights\n\n        const heights = collect_column(result, header.height_column);\n\n        // parse colors\n\n        const colors = collect_column(result, header.color_column);\n\n        // parse labels\n\n        const labels = collect_labels_column(result, header.label_column);\n\n        // Load topology\n\n        const createParentNode = (index: number, parentIndex: number): Edge => {\n            return { parentIndex, index } as Edge;\n        };\n\n        const gatherParentKey = (groupings: string[], index: number, row: any[]): string => {\n            const values = ['', ''];\n            for (let i = 0; i < index; ++i) {\n                values[i + 1] = row[groupings[i]] || '-';\n            }\n\n            return values.join('/');\n        }\n\n        const edges = new Array<Configuration.NodeIdentifier>();\n        const names = new Map<number, string>();\n\n        const parentNodes = {};\n        let currentIndex = -1;\n\n        // Create root\n        parentNodes['/'] = createParentNode(currentIndex, -1);\n        currentIndex += 1;\n\n        const groupings = header.groupings;\n\n        // Create inner nodes\n        groupings.forEach((value, index) => {\n            result.data.forEach((row: any[]) => {\n                const parentParentKey = gatherParentKey(groupings, index, row);\n                const parentKey = gatherParentKey(groupings, index + 1, row);\n\n                if (!(parentParentKey in parentNodes)) {\n                    log(LogLevel.Warning, parentParentKey, 'not in', parentNodes);\n                    return;\n                }\n\n                if (!(parentKey in parentNodes)) {\n                    parentNodes[parentKey] = createParentNode(currentIndex, parentNodes[parentParentKey].index);\n                    edges.push(parentNodes[parentKey].parentIndex);\n                    edges.push(currentIndex);\n                    names.set(currentIndex, row[groupings[index]]);\n                    currentIndex += 1;\n                }\n            });\n        });\n\n        const numberOfInnerNodes = currentIndex + 1;\n\n        // Add leaf nodes\n        result.data.forEach((row: any[]) => {\n            const parentKey = gatherParentKey(groupings, groupings.length, row);\n\n            if (!(parentKey in parentNodes)) {\n                log(LogLevel.Warning, parentKey, 'not in', parentNodes);\n                return;\n            }\n\n            edges.push(parentNodes[parentKey].index);\n            edges.push(currentIndex);\n            currentIndex += 1;\n        });\n\n        config.topology = {\n            edges: edges,\n            semantics: Topology.InputSemantics.ParentIdId,\n            format: Topology.InputFormat.Interleaved,\n        };\n\n        config.buffers = [\n            {\n                identifier: 'source-weights',\n                type: 'numbers',\n                data: (new Array(numberOfInnerNodes)).fill(0.0).concat(weights),\n                linearization: 'topology',\n            },\n            {\n                identifier: 'source-heights',\n                type: 'numbers',\n                data: (new Array(numberOfInnerNodes)).fill(0.0).concat(heights),\n                linearization: 'topology',\n            },\n            {\n                identifier: 'source-colors',\n                type: 'numbers',\n                data: (new Array(numberOfInnerNodes)).fill(0.0).concat(colors),\n                linearization: 'topology',\n            }\n        ];\n\n        config.bufferViews = [\n            {\n                identifier: 'weights',\n                source: 'buffer:source-weights',\n                transformations: [\n                    { type: 'fill-invalid', value: 0.0, invalidValue: -1.0 },\n                    { type: 'propagate-up', operation: 'sum' }\n                ],\n            },\n            {\n                identifier: 'heights-normalized',\n                source: 'buffer:source-heights',\n                transformations: [\n                    { type: 'fill-invalid', value: 0.0, invalidValue: -1.0 },\n                    { type: 'normalize', operation: 'zero-to-max' }\n                ],\n            },\n            {\n                identifier: 'colors-normalized',\n                source: 'buffer:source-colors',\n                transformations: [\n                    { type: 'fill-invalid', value: 0.0, invalidValue: -1.0 },\n                    { type: 'normalize', operation: 'zero-to-max' }\n                ],\n            }\n        ];\n\n        config.colors = [\n            { identifier: 'emphasis', colorspace: 'hex', value: '#00b0ff' },\n            { identifier: 'auxiliary', colorspace: 'hex', values: ['#00aa5e', '#71237c'] },\n            { identifier: 'inner', colorspace: 'hex', values: ['#e8eaee', '#eef0f4'] },\n            { identifier: 'leaf', preset: 'inferno', steps: 7 },\n        ];\n\n        config.layout = {\n            algorithm: 'snake',\n            weight: 'bufferView:weights',\n            sort: {\n                key: 'bufferView:weights',\n                algorithm: NodeSort.Algorithm.Keep\n            },\n            parentPadding: { type: 'relative', value: 0.05 },\n            siblingMargin: { type: 'relative', value: 0.05 },\n            accessoryPadding: {\n                type: 'absolute',\n                direction: 'bottom',\n                value: [0.0, 0.02, 0.01, 0.0],\n                relativeAreaThreshold: 0.4, targetAspectRatio: 8.0,\n            },\n        };\n\n        config.geometry = {\n            parentLayer: { showRoot: false },\n            leafLayer: {\n                colorMap: 'color:leaf',\n                height: 'bufferView:heights-normalized',\n                colors: 'bufferView:colors-normalized',\n            },\n            emphasis: { outline: new Array<number>(), highlight: new Array<number>() },\n            heightScale: 0.5,\n        };\n\n        if (has_labels_column(header.label_column)) {\n            for (let i = 0; i < labels.length; ++i) {\n                names.set(i + numberOfInnerNodes - 1, labels[i]);\n            }\n        }\n\n        config.labels = {\n            innerNodeLayerRange: [0, 2],\n            numTopInnerNodes: 50,\n            numTopWeightNodes: 50,\n            numTopHeightNodes: 50,\n            numTopColorNodes: 50,\n            names: names\n        };\n\n        config.altered.alter('any');\n    }\n\n    static loadAsync(data: string): Promise<Configuration> {\n        const header = new CSVHeader();\n\n        CSVData.initializeHeader(header);\n\n        const lines = data.split('\\n');\n\n        CSVData.parseHeader(lines, header);\n\n        const payload = lines.join('\\n');\n\n        return this.loadAsyncHeader(payload, header);\n    }\n\n    static loadAsyncHeader(data: string, header: CSVHeader): Promise<Configuration> {\n        return new Promise<Configuration>((resolve, reject) => {\n            const config = new Configuration();\n\n            parse(data, {\n                error: (error: any) => reject(error),\n                complete: (result) => {\n                    CSVData.parsePapaparseResult(result, header, config);\n\n                    resolve(config);\n                },\n                delimiter: header.csv_delimiter,\n                quoteChar: '\"',\n                escapeChar: '\"',\n                header: true,\n                comments: '#',\n                skipEmptyLines: true\n            });\n        });\n    }\n\n}\n","\n\n/* spellchecker: disable */\n\nimport * as gloperate from 'webgl-operate';\n\nimport log = gloperate.auxiliaries.log;\nimport LogLevel = gloperate.auxiliaries.LogLevel;\n\nimport {\n    Configuration,\n    Renderer,\n    Visualization,\n    initialize\n} from '../../source/treemap-renderer';\n\nimport { CSVData } from './csvdata';\n\nimport { Example } from '../example';\n\n/* spellchecker: enable */\n\n\n// tslint:disable:max-classes-per-file\n\nexport class GroupedTreemapExample extends Example {\n\n    protected obtainUrl(hash: string): string {\n        return window.location.origin + window.location.pathname + \"?data=\" + hash;\n    }\n\n    get canvas(): gloperate.Canvas {\n        return this._canvas;\n    }\n\n    get visualization(): Visualization {\n        return this._visualization;\n    }\n\n    get renderer(): Renderer {\n        return this._renderer;\n    }\n\n    private _canvas: gloperate.Canvas;\n    private _visualization: Visualization;\n    private _renderer: Renderer;\n\n\n    validate(element: HTMLCanvasElement | string): boolean {\n        return this.initialize(element);\n        // return false;\n    }\n\n    preview(element: HTMLCanvasElement | string): boolean {\n        return this.initialize(element);\n        // return false;\n    }\n\n    feature(element: HTMLCanvasElement | string): boolean {\n\n        const dataElement = window.document.getElementById('csv-data')! as HTMLTextAreaElement;\n        const hashElement = window.document.getElementById('data-hash')! as HTMLPreElement;\n        const reloadElement = window.document.getElementById('reload')! as HTMLButtonElement;\n        const configElement = window.document.getElementById('config-display')! as HTMLPreElement;\n\n        const success = this.initialize(element);\n\n        const renderer = this._visualization.renderer as Renderer;\n        const canvas = this._canvas as gloperate.Canvas;\n        const visualization = this._visualization;\n\n        const fullscreenTarget = canvas.element;\n\n        window.document.getElementById('fullscreen')!.onclick = () => {\n            gloperate.viewer.Fullscreen.toggle(fullscreenTarget);\n        };\n\n        const loadConfig = (config: Configuration) => {\n            const oldConfig = visualization.configuration;\n\n            try {\n                visualization.configuration = config;\n                visualization.update();\n                renderer.invalidate();\n\n                if (configElement) {\n                    configElement.textContent = JSON.stringify(config.toJSON(), null, 2);\n                }\n            }\n            catch (error) {\n                console.log(error);\n\n                if (oldConfig === undefined) {\n                    return;\n                }\n\n                const rescueConfig = new Configuration();\n\n                rescueConfig.topology = oldConfig.topology;\n                rescueConfig.layout = oldConfig.layout;\n                rescueConfig.buffers = oldConfig.buffers;\n                rescueConfig.bufferViews = oldConfig.bufferViews;\n                rescueConfig.colors = oldConfig.colors;\n                rescueConfig.geometry = oldConfig.geometry;\n                rescueConfig.labels = oldConfig.labels;\n\n                visualization.configuration = rescueConfig;\n                visualization.update();\n                renderer.invalidate();\n            }\n        };\n\n        // export variables\n\n        (window as any)['gloperate'] = gloperate;\n\n        (window as any)['canvas'] = canvas;\n        (window as any)['context'] = canvas.context;\n        (window as any)['controller'] = canvas.controller;\n\n        (window as any)['visualization'] = visualization;\n        (window as any)['renderer'] = renderer;\n\n        if (dataElement) {\n            const searchParams = new URLSearchParams(window.location.search);\n            const data = searchParams.get('data');\n\n            if (data) {\n                log(LogLevel.Debug, \"Load from\", data);\n                dataElement.value = atob(data);\n                // TODO: refactor to use Buffer.from(data, 'base64')\n            }\n\n            dataElement.oninput = (event) => {\n                const testdata = dataElement.value;\n\n                CSVData.loadAsync(testdata)\n                    .then((config: Configuration) => {\n                        loadConfig(config);\n\n                        if (hashElement) {\n                            hashElement.textContent = this.obtainUrl(btoa(testdata));\n                        }\n                    });\n            };\n            dataElement.oninput({} as Event); // initial load\n        }\n\n        if (reloadElement && hashElement) {\n            reloadElement.onclick = (event) => {\n                if (hashElement.textContent && hashElement.textContent !== \"\") {\n                    window.location.href = hashElement.textContent! as string;\n                }\n            };\n        }\n\n        return success && dataElement !== undefined && dataElement !== null;\n    }\n\n\n    initialize(element: HTMLCanvasElement | string): boolean {\n\n        this._canvas = initialize(element);\n\n        this._visualization = new Visualization();\n        const renderer: Renderer = this._visualization.renderer as Renderer;\n        this._canvas.renderer = renderer;\n\n        super.expose();\n\n        return true;\n    }\n\n    uninitialize(): void {\n        this._canvas.dispose();\n        (this._renderer as gloperate.Renderer).uninitialize();\n    }\n\n}\n","\n        import { GroupedTreemapExample } from './treemap.ts';\n\n        window.onload = function () {\n\n            const canvas = document.getElementById('canvas');\n            const exampleRenderer = new GroupedTreemapExample();\n            window['example'] = exampleRenderer;\n            exampleRenderer.feature(canvas);\n\n            const aboutCode = window.document.getElementById('context-about');\n            if (aboutCode) {\n                aboutCode.innerText = context.aboutString();\n            }\n        };\n    ","\n        import * as treemaprenderer from '/examples/index.ts';\n        window['treemaprenderer'] = treemaprenderer;\n        document.title = __LIB_NAME__;\n        document.querySelector('#version').innerHTML = treemaprenderer.version();\n        document.querySelector('#branch').innerHTML = treemaprenderer.branch();\n        document.querySelector('#commit').innerHTML = treemaprenderer.commit();\n        document.querySelector('#cryear').innerHTML = new Date().getFullYear();\n    "],"names":["log","gloperate.auxiliaries","LogLevel","CSVHeader","_CSVData","header","lines","line","key","value","s","result","config","collect_column","name","row","has_labels_column","collect_labels_column","weights","heights","colors","labels","createParentNode","index","parentIndex","gatherParentKey","groupings","values","i","edges","names","parentNodes","currentIndex","parentParentKey","parentKey","numberOfInnerNodes","Topology","NodeSort","data","payload","resolve","reject","Configuration","parse","error","url","request","CSVData","GroupedTreemapExample","Example","hash","element","dataElement","hashElement","reloadElement","configElement","success","renderer","canvas","visualization","fullscreenTarget","gloperate.viewer","loadConfig","oldConfig","rescueConfig","gloperate","event","testdata","initialize","Visualization","exampleRenderer","aboutCode","treemaprenderer","treemaprenderer.version","treemaprenderer.branch","treemaprenderer.commit"],"mappings":"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"}