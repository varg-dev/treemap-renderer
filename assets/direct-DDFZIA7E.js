import{t as b,v as h,b as x,c as z}from"./index-yrmQOoAm.js";import{w as d,E,g as C,i as _,V as L,C as m}from"./example-D6mntx4T.js";const S=d.auxiliaries.log,V=d.auxiliaries.LogLevel;class B extends E{obtainUrl(n){return window.location.origin+window.location.pathname+"?data="+n}get canvas(){return this._canvas}get visualization(){return this._visualization}get renderer(){return this._renderer}validate(n){return this.initialize(n)}preview(n){return this.initialize(n)}feature(n){const o=window.document.getElementById("csv-data"),a=window.document.getElementById("data-hash"),w=window.document.getElementById("reload"),g=window.document.getElementById("config-display"),v=this.initialize(n),c=this._visualization.renderer,l=this._canvas,s=this._visualization,y=l.element;window.document.getElementById("fullscreen").onclick=()=>{d.viewer.Fullscreen.toggle(y)};const p=u=>{let i={};try{i=JSON.parse(u)}catch(e){console.log(e);return}const t=s.configuration;try{const e=new m;t!==void 0&&(e.topology=t.topology,e.layout=t.layout,e.buffers=t.buffers,e.bufferViews=t.bufferViews,e.colors=t.colors,e.geometry=t.geometry,e.labels=t.labels),e.topology=i.topology||{},e.layout=i.layout||{},e.buffers=i.buffers||[],e.bufferViews=i.bufferViews||[],e.colors=i.colors||[],e.geometry=i.geometry||{},e.labels=i.labels||{},s.configuration=e,s.update(),c.invalidate(),g&&(g.textContent=JSON.stringify(e.toJSON(),null,2))}catch(e){if(console.log(e),t===void 0)return;const r=new m;r.topology=t.topology,r.layout=t.layout,r.buffers=t.buffers,r.bufferViews=t.bufferViews,r.colors=t.colors,r.geometry=t.geometry,r.labels=t.labels,s.configuration=r,s.update(),c.invalidate()}};if(window.gloperate=C,window.canvas=l,window.context=l.context,window.controller=l.controller,window.visualization=s,window.renderer=c,o){const i=new URLSearchParams(window.location.search).get("data");i&&(S(V.Debug,"Load from",i),o.value=atob(i)),o.oninput=t=>{const e=o.value;p(e),a&&(a.textContent=this.obtainUrl(btoa(e)))},o.oninput({})}return w&&a&&(w.onclick=u=>{a.textContent&&a.textContent!==""&&(window.location.href=a.textContent)}),v&&o!==void 0&&o!==null}initialize(n){this._canvas=_(n),this._visualization=new L;const o=this._visualization.renderer;return this._canvas.renderer=o,super.expose(),!0}uninitialize(){this._canvas.dispose(),this._renderer.uninitialize()}}window.onload=function(){const f=document.getElementById("canvas"),n=new B;window.example=n,n.feature(f);const o=window.document.getElementById("context-about");o&&(o.innerText=context.aboutString())};window.treemaprenderer=b;document.title="treemap-renderer";document.querySelector("#version").innerHTML=h();document.querySelector("#branch").innerHTML=x();document.querySelector("#commit").innerHTML=z();document.querySelector("#cryear").innerHTML=new Date().getFullYear();
