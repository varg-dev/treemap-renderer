import{t as p,v as b,b as h,c as x}from"./index-Bx_F_XeT.js";import{w as m,E as z,g as E,i as C,V as _,C as g}from"./example-BGfpFHRI.js";const L=m.auxiliaries.log,S=m.auxiliaries.LogLevel;class V extends z{obtainUrl(o){return window.location.origin+window.location.pathname+"?data="+o}get canvas(){return this._canvas}get visualization(){return this._visualization}get renderer(){return this._renderer}validate(o){return this.initialize(o)}preview(o){return this.initialize(o)}feature(o){const n=window.document.getElementById("csv-data"),a=window.document.getElementById("data-hash"),f=window.document.getElementById("reload"),w=window.document.getElementById("config-display"),v=this.initialize(o),l=this._visualization.renderer,c=this._canvas,s=this._visualization,y=u=>{let i={};try{i=JSON.parse(u)}catch(e){console.log(e);return}const t=s.configuration;try{const e=new g;t!==void 0&&(e.topology=t.topology,e.layout=t.layout,e.buffers=t.buffers,e.bufferViews=t.bufferViews,e.colors=t.colors,e.geometry=t.geometry,e.labels=t.labels),e.topology=i.topology||{},e.layout=i.layout||{},e.buffers=i.buffers||[],e.bufferViews=i.bufferViews||[],e.colors=i.colors||[],e.geometry=i.geometry||{},e.labels=i.labels||{},s.configuration=e,s.update(),l.invalidate(),w&&(w.textContent=JSON.stringify(e.toJSON(),null,2))}catch(e){if(console.log(e),t===void 0)return;const r=new g;r.topology=t.topology,r.layout=t.layout,r.buffers=t.buffers,r.bufferViews=t.bufferViews,r.colors=t.colors,r.geometry=t.geometry,r.labels=t.labels,s.configuration=r,s.update(),l.invalidate()}};if(window.gloperate=E,window.canvas=c,window.context=c.context,window.controller=c.controller,window.visualization=s,window.renderer=l,n){const i=new URLSearchParams(window.location.search).get("data");i&&(L(S.Debug,"Load from",i),n.value=atob(i)),n.oninput=t=>{const e=n.value;y(e),a&&(a.textContent=this.obtainUrl(btoa(e)))},n.oninput({})}return f&&a&&(f.onclick=u=>{a.textContent&&a.textContent!==""&&(window.location.href=a.textContent)}),v&&n!==void 0&&n!==null}initialize(o){this._canvas=C(o),this._visualization=new _;const n=this._visualization.renderer;return this._canvas.renderer=n,super.expose(),!0}uninitialize(){this._canvas.dispose(),this._renderer.uninitialize()}}window.onload=function(){const d=document.getElementById("canvas"),o=new V;window.example=o,o.feature(d);const n=window.document.getElementById("context-about");n&&(n.innerText=context.aboutString())};window.treemaprenderer=p;document.title="treemap-renderer";document.querySelector("#version").innerHTML=b();document.querySelector("#branch").innerHTML=h();document.querySelector("#commit").innerHTML=x();document.querySelector("#cryear").innerHTML=new Date().getFullYear();
